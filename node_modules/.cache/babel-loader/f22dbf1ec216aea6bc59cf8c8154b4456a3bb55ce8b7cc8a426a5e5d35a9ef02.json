{"ast":null,"code":"import _regeneratorRuntime from\"/home/aumchuu/project-deploy/my-react-320/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/aumchuu/project-deploy/my-react-320/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/aumchuu/project-deploy/my-react-320/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import logo from'../logo.svg';import'../App.css';import React,{useState,useEffect}from'react';import axios,{AxiosError}from'axios';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Books(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var token=localStorage.getItem('token');useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var books,_e$response,cause,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('http://localhost:8082/books',{headers:{Authorization:\"Bearer \".concat(token)}});case 3:books=_context.sent;setData(books.data);return _context.abrupt(\"return\",data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);if(!(_context.t0 instanceof AxiosError)){_context.next=15;break;}cause=((_e$response=_context.t0.response)===null||_e$response===void 0?void 0:_e$response.data.msg)||'internal error';status=_context.t0.code;return _context.abrupt(\"return\",{data:[],msg:\"cause : \".concat(cause,\"(\").concat(status,\")\")});case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[]);console.log(data);console.log(typeof data);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"App-logo\",alt:\"logo\"}),/*#__PURE__*/_jsx(\"a\",{className:\"App-link\",href:\"https://reactjs.org\",target:\"_blank\",rel:\"noopener noreferrer\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",class:\"fs-3 text-white dropshadow text-decoration\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-light\",children:\"Access Token\"})}),/*#__PURE__*/_jsx(Link,{to:\"/books\",class:\"fs-3 text-white dropshadow text-decoration\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-light ms-3\",children:\"Books\"})}),/*#__PURE__*/_jsx(Link,{to:\"/users\",class:\"fs-3 text-white dropshadow text-decoration\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-light ms-3\",children:\"Users\"})})]}),/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white fs-5\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white fs-5\",children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white fs-5\",children:\"FirstName\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white fs-5\",children:\"LastName\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.length>0?data.map(function(book){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"text-white fs-5\",children:book.isbn}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white fs-6\",children:book.title}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white fs-6\",children:book.author}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white fs-6\",children:book.price})]},book.id);}):/*#__PURE__*/_jsx(\"div\",{class:\"text-white\",children:\"ACCESS_TOKEN invalid\"})})]})]})});}export default Books;","map":{"version":3,"names":["logo","React","useState","useEffect","axios","AxiosError","Link","Books","data","setData","token","localStorage","getItem","getData","get","headers","Authorization","books","console","error","cause","response","msg","status","code","log","length","map","book","isbn","title","author","price","id"],"sources":["/home/aumchuu/project-deploy/my-react-320/src/component/Books.js"],"sourcesContent":["import logo from '../logo.svg';\nimport '../App.css';\nimport React, { useState, useEffect } from 'react';\nimport axios, { AxiosError } from 'axios';\nimport { Link } from 'react-router-dom';\n\nfunction Books() {\n    const [data, setData] = useState([]);\n    const token = localStorage.getItem('token');\n\n    useEffect(() => {\n        const getData = async () => {\n            try {\n                const books = await axios.get('http://localhost:8082/books', {\n                    headers: {\n                        Authorization: `Bearer ${token}`,\n                    },\n                });\n                setData(books.data);\n                return data;\n            } catch (e) {\n                console.error(e);\n                if (e instanceof AxiosError) {\n                    const cause = e.response?.data.msg || 'internal error';\n                    const status = e.code;\n                    return {\n                        data: [],\n                        msg: `cause : ${cause}(${status})`,\n                    };\n                }\n            }\n        };\n        getData();\n    }, []);\n\n    console.log(data);\n    console.log(typeof data);\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                <a\n                    className=\"App-link\"\n                    href=\"https://reactjs.org\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                >\n                </a>\n                <div>\n                    <Link to=\"/\" class=\"fs-3 text-white dropshadow text-decoration\">\n                        <button type=\"button\" class=\"btn btn-outline-light\">Access Token</button>\n                    </Link>\n                    <Link to=\"/books\" class=\"fs-3 text-white dropshadow text-decoration\">\n                        <button type=\"button\" class=\"btn btn-outline-light ms-3\">Books</button>\n                    </Link>\n                    <Link to=\"/users\" class=\"fs-3 text-white dropshadow text-decoration\">\n                        <button type=\"button\" class=\"btn btn-outline-light ms-3\">Users</button>\n                    </Link>\n\n                </div>\n\n                <table class=\"table\">\n                    <thead>\n                        <tr>\n                            <th scope=\"col\" className='text-white fs-5'>ID</th>\n                            <th scope=\"col\" className='text-white fs-5'>Username</th>\n                            <th scope=\"col\" className='text-white fs-5'>FirstName</th>\n                            <th scope=\"col\" className='text-white fs-5'>LastName</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            data.length > 0 ? (\n                                data.map((book) => (\n                                    <tr key={book.id}>\n                                        <th scope=\"row\" className='text-white fs-5'>{book.isbn}</th>\n                                        <td className='text-white fs-6'>{book.title}</td>\n                                        <td className='text-white fs-6'>{book.author}</td>\n                                        <td className='text-white fs-6'>{book.price}</td>\n                                    </tr>\n                                ))): (\n                                    <div class=\"text-white\">ACCESS_TOKEN invalid</div>\n                                )\n                            }\n                    </tbody>\n                </table>\n            </header>\n        </div>\n    );\n}\nexport default Books;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}